# 粗浅的看队列

## **简单聊聊队列**

### 介绍

队列也是一种“操作受限”的线性表，只支持两种基本操作：入队和出队。

* 分布式应用中的消息队列，也是一种队列结构
* 考虑使用[CAS](https://zh.wikipedia.org/wiki/%E6%AF%94%E8%BE%83%E5%B9%B6%E4%BA%A4%E6%8D%A2)实现无锁队列，则在入队前，获取tail位置，入队时比较tail是否发生变化，如果否，则允许入队，反之，本次入队失败。出队则是获取head位置，进行[CAS](https://zh.wikipedia.org/wiki/%E6%AF%94%E8%BE%83%E5%B9%B6%E4%BA%A4%E6%8D%A2)。

### 应用

队列的应用非常广泛，特别是一些具有某些额外特性的队列，比如循环队列、阻塞队列、并发队列。它们在很多偏底层的系统、框架、中间件的开发中，起着关键性的作用。比如高性能队列 Disruptor、Linux 环形缓存，都用到了循环并发队列；Java concurrent 并发包利用 ArrayBlockingQueue 来实现公平锁等。

循环队列的长度设定需要对并发数据有一定的预测，否则会丢失太多请求。

关于如何实现无锁并发队列
可以使用 [CAS](https://zh.wikipedia.org/wiki/%E6%AF%94%E8%BE%83%E5%B9%B6%E4%BA%A4%E6%8D%A2) + 数组的方式实现。

分布式消息队列，如 kafka 也是一种队列。

# OpenResty优点随记

## **OpenResty 的三大优点**

1. 详尽的文档和测试用例
2. 同步非阻塞模型
    * 同步异步说的是代码,调用就有返回是同步,反之是异步
    * 阻塞非阻塞说的是`cpu`,`cpu`要等待就是阻塞,反之非阻塞
    * 非阻塞并不能缩减运行时间,其最大的优点是可以服务更多的请求,达到`c100k`
    * 站在用户请求的角度,非阻塞并不会减少处理的时间,但是会减少等待的时间
    * `OpenResty`的每个`worker`同一时间只在处理一个请求,如果阻塞了,这个`worker`上的其他请求都需要等待
    * `C10K`要解决的是高并发的问题,是服务端的整体性能
3. 动态
    * 传统的`Web`服务器,比如`NGINX`,如果发生任何的变动,都需要你去修改磁盘上的配置文件,然后重新加载才能生效,这也是因为它们并没有提供`API`,来控制运行时的行为
    * 在需要频繁变动的微服务领域,`NGINX`虽然有多次尝试,但毫无建树而异军突起的`Envoy`, 正是凭着`xDS`这种动态控制的`API`,大有对`NGINX`造成降维攻击的威胁
    * 和`NGINX`,`Envoy`不同的是,`OpenResty`是由脚本语言`Lua`来控制逻辑的,而动态,便是`Lua`天生的优势通过`OpenResty`中 `lua-nginx-module`模块中提供的`Lua API`,
    * 我们可以动态地控制路由、上游、`SSL`证书、请求、响应等甚至更进一步,你可以在不重启`OpenResty`的前提下,修改业务的处理逻辑,并不局限于`OpenResty`提供的`Lua API`